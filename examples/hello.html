<!DOCTYPE html>
<html lang="en">
<body>
    <script src="../src/construct.js"></script>
    <script>
        // Init constructJS
        const constructApp = createConstructApp('ConstructJS: Hello');
        constructApp.setToRoot({ justifyContent: 'center', alignItems: 'center' });

        // Main style class
        constructApp.addStyle('.mainStyle', {
            padding: "8px 16px",
            border: "none",
            fontSize: "15px",
            cursor: "pointer",
            backgroundColor: 'red',
            focus: {
                backgroundColor: 'lime !important',
            }
        });
        constructApp.addStyleToCSS('.mainStyle');
        
        // Set new style to previously made style
        constructApp.setToStyle('.mainStyle', {
            border: '10px solid black',
        });

        // Button style
        constructApp.addStyle('#btn', {
            transition: '0.25s ease-in-out',
            focus: {
                // On focus will scale upwards
                transform: 'scale(2)',
            },
        });
        constructApp.addStyleToCSS('#btn');

        // Counter click state
        const counter = constructApp.addState('counter', 0);
        // Log the counter state when it changes
        counter.addListener((value) => { console.log('Counter state: '+ value) });

        // Click event
        function click_event(event) {
            counter.set(counter.get() + 1);
            text.innerHTML = 'Presses: '+counter.get();
        }

        // Reset click event on unfocus
        function reset_event(event) {
            counter.set(0);
            text.innerHTML = 'Hello!';
        }

        // Button element
        const btn = constructApp.create(
            'button',
            {
                events: { click: click_event, blur: reset_event, focus:()=>console.log('Button focussed!')},
                style: ['.mainStyle', { backgroundColor: 'pink', width: '40%', height: '20%' }]
            },
            'Press Me', 'btn'
        );
        
        // Create a environment style variable (held in <html> tag)
        constructApp.createVariable('color','red');

        // Test element
        const text = constructApp.create(
            'div',
            {
                // Uses environment style variable color
                style: ['.mainStyle', { backgroundColor: 'var(--color)', margin: '5px', border: '2px solid red'}]
            },
            'Hello!', 'text'
        );

        // Append the button element to the page
        constructApp.appendChild(btn);
        // Append the text element to the button
        btn.appendChild(text);

        // A test keyframe animation
        constructApp.createAnimation('testAnimation',{'0%':{color:'black'},'100%':{color:'red'}});
        // Apply the animation to the button, starts in 1/2 a second and repeats forever
        btn.style.animation = 'testAnimation 1s ease-in-out 0.5s infinite alternate forwards';

        // Another test keyframe animation
        constructApp.createAnimation('testAnimation2',{'0%':{fontSize:'15px'},'100%':{fontSize:'30px'}});
        // Apply the animation to the button, starts in 1/2 a second and repeats forever
        text.style.animation = 'testAnimation2 1s ease-in-out 0.5s infinite alternate forwards';

        // Triggers when the page loads
        constructApp.setOnload(()=>{console.log('Page is loaded!')});
        // Test the initalizer, do not need this when exporting the final website
        constructApp.onload();
    </script>
</body>

</html>